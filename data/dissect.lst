# a comment before import
import (
  "blocks.lst"
  "funcs.lst"
)

# define constants
define (
  Version = 1
  Nine = 9
)

# declare parameters for blocks and data
declare (
  param0[size=32, type=u32]
  param1[size=32, type=u32]
  param2[size=32, type=u32]
  param3[size=32, type=u32]
  param4[size=32, type=u32]
)

# enum block are introduced with the keyword enum follow by an ident
enum KO_OK (
  0 = KO
  1 = OK
)

polynomial Eighty7 (
  0 = 87
  1 = 0.3
  2 = -1.2
)

block block1 (
  param0
  param1
  param2
)

block block2 (
  param3
  param4
)

data (
  param0a[offset=0, repeat=1, type=u8, size=8, transform=KO_OK]
  param1a[offset=0, repeat=1, type=u8, size=8, transform=KO_OK]
  include block1

  if param0 == 1; then
    include block2
  else if param0 == 2; then
    include block3
    param3
    param4
    param5a[offset=16, repeat=2, type=i16]
  else
    include block4
    include block5
  fi

  param5[]
  param6[]
  include block7

  if param8 == 0; then
    include block8
  fi
)
